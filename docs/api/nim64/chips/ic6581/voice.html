<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>nim64/chips/ic6581/voice</title>
<link rel="stylesheet" type="text/css" href="../../../nimdoc.out.css">

<script type="text/javascript" src="../../../dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  toggleSwitch.addEventListener('change', switchTheme, false);

  const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark') {
      toggleSwitch.checked = true;
    }
  }
}
</script>

</head>
<body onload="main()">
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">nim64/chips/ic6581/voice</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="../../../theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Voice"
    title="Voice = ref object
  waveform: Waveform         ## This voice&apos;s waveform generator.
  envelope: Envelope         ## This voice&apos;s envelope generator.">Voice</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">pwhi
      <li><a class="reference" href="#pwhi%2CVoice%2Cuint"
    title="pwhi(voice: Voice; value: uint)">pwhi,<wbr>Voice,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">output
      <li><a class="reference" href="#output%2CVoice"
    title="output(voice: Voice): int">output,<wbr>Voice</a></li>

  </ul>
  <ul class="simple nested-toc-section">vcreg
      <li><a class="reference" href="#vcreg%2CVoice%2Cuint"
    title="vcreg(voice: Voice; value: uint)">vcreg,<wbr>Voice,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">reset
      <li><a class="reference" href="#reset%2CVoice%2Cbool"
    title="reset(voice: Voice; value: bool = true)">reset,<wbr>Voice,<wbr>bool</a></li>

  </ul>
  <ul class="simple nested-toc-section">pwlo
      <li><a class="reference" href="#pwlo%2CVoice%2Cuint"
    title="pwlo(voice: Voice; value: uint)">pwlo,<wbr>Voice,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">new_voice
      <li><a class="reference" href="#new_voice"
    title="new_voice(): Voice">new_voice</a></li>

  </ul>
  <ul class="simple nested-toc-section">waveform_output
      <li><a class="reference" href="#waveform_output%2CVoice"
    title="waveform_output(voice: Voice): uint">waveform_output,<wbr>Voice</a></li>

  </ul>
  <ul class="simple nested-toc-section">envelope_output
      <li><a class="reference" href="#envelope_output%2CVoice"
    title="envelope_output(voice: Voice): uint">envelope_output,<wbr>Voice</a></li>

  </ul>
  <ul class="simple nested-toc-section">frelo
      <li><a class="reference" href="#frelo%2CVoice%2Cuint"
    title="frelo(voice: Voice; value: uint)">frelo,<wbr>Voice,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">clock
      <li><a class="reference" href="#clock%2CVoice"
    title="clock(voice: Voice)">clock,<wbr>Voice</a></li>

  </ul>
  <ul class="simple nested-toc-section">sync
      <li><a class="reference" href="#sync%2CVoice%2CVoice"
    title="sync(voice: Voice; target: Voice)">sync,<wbr>Voice,<wbr>Voice</a></li>

  </ul>
  <ul class="simple nested-toc-section">surel
      <li><a class="reference" href="#surel%2CVoice%2Cuint"
    title="surel(voice: Voice; value: uint)">surel,<wbr>Voice,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">frehi
      <li><a class="reference" href="#frehi%2CVoice%2Cuint"
    title="frehi(voice: Voice; value: uint)">frehi,<wbr>Voice,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">atdcy
      <li><a class="reference" href="#atdcy%2CVoice%2Cuint"
    title="atdcy(voice: Voice; value: uint)">atdcy,<wbr>Voice,<wbr>uint</a></li>

  </ul>

  </ul>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"></p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="envelope.html">envelope</a>, <a class="reference external" href="waveform.html">waveform</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<a id="Voice"></a>
<dt><pre><a href="voice.html#Voice"><span class="Identifier">Voice</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span>
  <span class="Identifier">waveform</span><span class="Other">:</span> <a href="waveform.html#Waveform"><span class="Identifier">Waveform</span></a>         <span class="Comment">## This voice's waveform generator.</span>
  <span class="Identifier">envelope</span><span class="Other">:</span> <a href="envelope.html#Envelope"><span class="Identifier">Envelope</span></a>         <span class="Comment">## This voice's envelope generator.</span>
  </pre></dt>
<dd>

<p>An emulation of a single 6581 voice, including a waveform generator, an envelope generator, and an amplitude modulator. The waveform and envelope generators are created from their respective types, while the amplitude modulator is built into this type (in the <tt class="docutils literal"><span class="pre">output</span></tt> proc).</p>
<p>This is a pretty straightforward class, consisting largely of procs that delegate to the underlying waveform and envelope generators. The amplitude modulator is fashioned by simply multiplying the outputs of the generators, adjusting the output value with the DC offsets that have been found in the actual chip.</p>


</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<a id="frelo,Voice,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#frelo%2CVoice%2Cuint"><span class="Identifier">frelo</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Sets the lower 8 bits of the frequency of the voice's waveform generator.

</dd>
<a id="frehi,Voice,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#frehi%2CVoice%2Cuint"><span class="Identifier">frehi</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Sets the upper 8 bits of the frequency of the voice's waveform generator.

</dd>
<a id="pwlo,Voice,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#pwlo%2CVoice%2Cuint"><span class="Identifier">pwlo</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Sets the lower 8 bits of the pulse width of the voice's waveform generator.

</dd>
<a id="pwhi,Voice,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#pwhi%2CVoice%2Cuint"><span class="Identifier">pwhi</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Sets the upper 4 bits of the pulse width of the voice's waveform generator. The high 4 bits of the passed value are ignored.

</dd>
<a id="vcreg,Voice,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#vcreg%2CVoice%2Cuint"><span class="Identifier">vcreg</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Sets the value of the control register for the voice. Setting bit 0 to a different value than it previously had will initiate the attack phase (<tt class="docutils literal"><span class="pre">0</span></tt> -&gt; <tt class="docutils literal"><span class="pre">1</span></tt>) or the release phase (<tt class="docutils literal"><span class="pre">1</span></tt> -&gt; <tt class="docutils literal"><span class="pre">0</span></tt>) of the voice's envelope generator.

</dd>
<a id="atdcy,Voice,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#atdcy%2CVoice%2Cuint"><span class="Identifier">atdcy</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Sets the attack (upper 4 bits) and the decay (lower 4 bits) for the voice's envelope generator.

</dd>
<a id="surel,Voice,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#surel%2CVoice%2Cuint"><span class="Identifier">surel</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Sets the sustain (upper 4 bits) and the release (lower 4 bits) for the voice's envelope generator.

</dd>
<a id="reset,Voice,bool"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#reset%2CVoice%2Cbool"><span class="Identifier">reset</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Other">=</span> <span class="Identifier">true</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Resets the voice. This delegates to the reset procs for the voice's waveform and envelope generator, which means that it requires two calls for a full reset (the first happens when <tt class="docutils literal"><span class="pre">RES</span></tt> goes low, and the second when it returns high).

</dd>
<a id="clock,Voice"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#clock%2CVoice"><span class="Identifier">clock</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Clocks the waveform and envelope generators so that they calculate their next output values.

</dd>
<a id="sync,Voice,Voice"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#sync%2CVoice%2CVoice"><span class="Identifier">sync</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">;</span> <span class="Identifier">target</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Syncs another voice to this voice. This is used by the waveform generator when the SYNC or RING bits are set in the control register.

</dd>
<a id="output,Voice"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#output%2CVoice"><span class="Identifier">output</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Calculates the output of the voice on this clock cycle. This proc emulates the &quot;Amplitude Modulator&quot; listed on the 6581 block diagram on its datasheet. The amplitude modulator is simple enough that it is integrated directly into the voice, rather than having a separate type for it and having Voice combine all three.

</dd>
<a id="waveform_output,Voice"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#waveform_output%2CVoice"><span class="Identifier">waveform_output</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">uint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Returns the output of the voice's waveform generator.

</dd>
<a id="envelope_output,Voice"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#envelope_output%2CVoice"><span class="Identifier">envelope_output</span></a><span class="Other">(</span><span class="Identifier">voice</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">uint</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Returns the output of the voice's envelope generator.

</dd>
<a id="new_voice"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#new_voice"><span class="Identifier">new_voice</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="voice.html#Voice"><span class="Identifier">Voice</span></a> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Creates a new Voice.

</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2021-08-09 08:35:33 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
