<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>nim64/chips/ic6581/filter</title>
<link rel="stylesheet" type="text/css" href="../../../nimdoc.out.css">

<script type="text/javascript" src="../../../dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  toggleSwitch.addEventListener('change', switchTheme, false);

  const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark') {
      toggleSwitch.checked = true;
    }
  }
}
</script>

</head>
<body onload="main()">
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">nim64/chips/ic6581/filter</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="../../../theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Filter"
    title="Filter = ref object
  cut: uint                  ## The value of the frequency cutoff registers, an 11-bit number.
  res: uint                  ## The filter resonance from the register, a 4-bit number.
  volume: uint               ## The master volume from the register, a 4-bit number.
  filtlp: bool               ## Whether or not the low-pass filter is enabled.
  filtbp: bool               ## Whether or not the band-pass filter is enabled.
  filthp: bool               ## Whether or not the high-pass filter is enabled.
  filtv1: bool               ## Whether or not Voice 1 is being filtered.
  filtv2: bool               ## Whether or not Voice 2 is being filtered.
  filtv3: bool               ## Whether or not Voice 3 is being filtered.
  filtex: bool               ## Whether or not the external input is being filtered.
  dscnv3: bool ## Set to `true` if voice 3 is producing no output. This will only happen if
               ## `filtv3` is `false`. It allows Voice 3 to be used purely for
               ## sync/modulation without adding anything to the output.
  lp: int ## The value of the low-pass component of the filter on the current clock cycle.
          ## This is the output of the second integrator in the filter circuit.
  bp: int ## The value of the band-pass component of the filter on the current clock cycle.
          ## This is the output of the first integrator in the filter circuit.
  hp: int ## The value of the high-pass component of the filter on the current clock cycle.
          ## This is the output of the summer in the filter circuit.
  nf: int                    ## The value of the unfiltered output on the current clock cycle.
  fc: int                    ## The filter cutoff frequency, in Hertz.
  q: int ## The filter resonance. This is actually stored as 1000 / Q, since that&apos;s what&apos;s
         ## used in calculations.">Filter</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">new_filter
      <li><a class="reference" href="#new_filter"
    title="new_filter(): Filter">new_filter</a></li>

  </ul>
  <ul class="simple nested-toc-section">output
      <li><a class="reference" href="#output%2CFilter"
    title="output(filter: Filter): int">output,<wbr>Filter</a></li>

  </ul>
  <ul class="simple nested-toc-section">sigvol
      <li><a class="reference" href="#sigvol%2CFilter%2Cuint"
    title="sigvol(filter: Filter; value: uint)">sigvol,<wbr>Filter,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">cuthi
      <li><a class="reference" href="#cuthi%2CFilter%2Cuint"
    title="cuthi(filter: Filter; value: uint)">cuthi,<wbr>Filter,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">reset
      <li><a class="reference" href="#reset%2CFilter"
    title="reset(filter: Filter)">reset,<wbr>Filter</a></li>

  </ul>
  <ul class="simple nested-toc-section">reson
      <li><a class="reference" href="#reson%2CFilter%2Cuint"
    title="reson(filter: Filter; value: uint)">reson,<wbr>Filter,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">cutlo
      <li><a class="reference" href="#cutlo%2CFilter%2Cuint"
    title="cutlo(filter: Filter; value: uint)">cutlo,<wbr>Filter,<wbr>uint</a></li>

  </ul>
  <ul class="simple nested-toc-section">clock
      <li><a class="reference" href="#clock%2CFilter%2Cint%2Cint%2Cint%2Cint"
    title="clock(filter: Filter; voice1, voice2, voice3, external: int)">clock,<wbr>Filter,<wbr>int,<wbr>int,<wbr>int,<wbr>int</a></li>

  </ul>

  </ul>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"></p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="../../utils.html">../../utils</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<a id="Filter"></a>
<dt><pre><a href="filter.html#Filter"><span class="Identifier">Filter</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span>
  <span class="Identifier">cut</span><span class="Other">:</span> <span class="Identifier">uint</span>                  <span class="Comment">## The value of the frequency cutoff registers, an 11-bit number.</span>
  <span class="Identifier">res</span><span class="Other">:</span> <span class="Identifier">uint</span>                  <span class="Comment">## The filter resonance from the register, a 4-bit number.</span>
  <span class="Identifier">volume</span><span class="Other">:</span> <span class="Identifier">uint</span>               <span class="Comment">## The master volume from the register, a 4-bit number.</span>
  <span class="Identifier">filtlp</span><span class="Other">:</span> <span class="Identifier">bool</span>               <span class="Comment">## Whether or not the low-pass filter is enabled.</span>
  <span class="Identifier">filtbp</span><span class="Other">:</span> <span class="Identifier">bool</span>               <span class="Comment">## Whether or not the band-pass filter is enabled.</span>
  <span class="Identifier">filthp</span><span class="Other">:</span> <span class="Identifier">bool</span>               <span class="Comment">## Whether or not the high-pass filter is enabled.</span>
  <span class="Identifier">filtv1</span><span class="Other">:</span> <span class="Identifier">bool</span>               <span class="Comment">## Whether or not Voice 1 is being filtered.</span>
  <span class="Identifier">filtv2</span><span class="Other">:</span> <span class="Identifier">bool</span>               <span class="Comment">## Whether or not Voice 2 is being filtered.</span>
  <span class="Identifier">filtv3</span><span class="Other">:</span> <span class="Identifier">bool</span>               <span class="Comment">## Whether or not Voice 3 is being filtered.</span>
  <span class="Identifier">filtex</span><span class="Other">:</span> <span class="Identifier">bool</span>               <span class="Comment">## Whether or not the external input is being filtered.</span>
  <span class="Identifier">dscnv3</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Comment">## Set to `true` if voice 3 is producing no output. This will only happen if</span>
               <span class="Comment">## `filtv3` is `false`. It allows Voice 3 to be used purely for</span>
               <span class="Comment">## sync/modulation without adding anything to the output.</span>
  <span class="Identifier">lp</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Comment">## The value of the low-pass component of the filter on the current clock cycle.</span>
          <span class="Comment">## This is the output of the second integrator in the filter circuit.</span>
  <span class="Identifier">bp</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Comment">## The value of the band-pass component of the filter on the current clock cycle.</span>
          <span class="Comment">## This is the output of the first integrator in the filter circuit.</span>
  <span class="Identifier">hp</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Comment">## The value of the high-pass component of the filter on the current clock cycle.</span>
          <span class="Comment">## This is the output of the summer in the filter circuit.</span>
  <span class="Identifier">nf</span><span class="Other">:</span> <span class="Identifier">int</span>                    <span class="Comment">## The value of the unfiltered output on the current clock cycle.</span>
  <span class="Identifier">fc</span><span class="Other">:</span> <span class="Identifier">int</span>                    <span class="Comment">## The filter cutoff frequency, in Hertz.</span>
  <span class="Identifier">q</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Comment">## The filter resonance. This is actually stored as 1000 / Q, since that's what's</span>
         <span class="Comment">## used in calculations.</span>
  </pre></dt>
<dd>

<p>An emulation of the analog filter circuit in the 6581 SID. We know quite a lot about the filter and its parameters, and I learned a lot about it from two sources: the <a class="reference external" href="https://sourceforge.net/p/sidplay-residfp/wiki/SID%20internals/">libsidplay</a> library and in particular the forum discussion <a class="reference external" href="http://forum.6502.org/viewtopic.php?f=8&amp;t=4150">here</a> that analyzes the circuitry itself; and the <a class="reference external" href="https://github.com/simonowen/resid">reSID</a> library. The latter in particular I used for measurements that I cannot make because I don't have a Commodore 64; that includes the samples of cutoff frequencies that are used to derive all of the cutoff frequencies, and the measures of DC offsets that affect the output.</p>
<p>The 6581 filter is a highly configurable two-integrator-loop biquad filter, as has been confirmed by Bob Yannes, the 6581's designer. The integrators are not built on op-amps as normal but instead take advantage of the characteristics of an NMOS inverter if it's biased just right. This is presumably because of chip-space concerns and doesn't make any real difference for the emulation.</p>
<p>This filter consists of a pair of integrators. The output of the first feeds the input of the second, while the outputs of both feed a summer which produces the input to the first. The high-pass output of such a filter is the summer output, the band-pass output is the output of the first integrator, and the low-pass output is the output of the second integrator.</p>
<p>Here's an attempt at the circuitry in ASCII, which is ugly at best.</p>
<p><pre class="listing">
          +-----------R---------------------------+
          |                                       |
          |       +---Rq--+                       |
          |       |       |                       |
          +---R---+---&lt;|--+---R---+               |
          |                       |               |
          |               +---C---+       +---C---+
          |               |       |       |       |
          +---R---+       +---R---+       +---R---+
          |       |       |       |       |       |
IN ---R---+--|&gt;---+--Rc---+--|&gt;---+--Rc---+--|&gt;---+
                  |               |               |
                  HP              BP              LP

IN - input
HP - high-pass output
BP - band-pass output
LP - low-pass output
|&gt; - op-amp
C  - capacitor
R  - resistor
Rc - variable resistor controlling cutoff frequency (set by CUTHI and CUTLO)
Rq - variable resistor controlling resonance (set by high 4 bits of RESON)
</pre> It's actually quite trivial to produce such a filter in code. The filtering itself takes all of five lines of code. The rest of the code in this module is dedicated largely either to deriving all of the possible cutoff frequencies by interpolating from the sample values from reSID and to register handling.</p>


</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<a id="cutlo,Filter,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#cutlo%2CFilter%2Cuint"><span class="Identifier">cutlo</span></a><span class="Other">(</span><span class="Identifier">filter</span><span class="Other">:</span> <a href="filter.html#Filter"><span class="Identifier">Filter</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>



</dd>
<a id="cuthi,Filter,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#cuthi%2CFilter%2Cuint"><span class="Identifier">cuthi</span></a><span class="Other">(</span><span class="Identifier">filter</span><span class="Other">:</span> <a href="filter.html#Filter"><span class="Identifier">Filter</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>



</dd>
<a id="reson,Filter,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#reson%2CFilter%2Cuint"><span class="Identifier">reson</span></a><span class="Other">(</span><span class="Identifier">filter</span><span class="Other">:</span> <a href="filter.html#Filter"><span class="Identifier">Filter</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>



</dd>
<a id="sigvol,Filter,uint"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#sigvol%2CFilter%2Cuint"><span class="Identifier">sigvol</span></a><span class="Other">(</span><span class="Identifier">filter</span><span class="Other">:</span> <a href="filter.html#Filter"><span class="Identifier">Filter</span></a><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">uint</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>



</dd>
<a id="reset,Filter"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#reset%2CFilter"><span class="Identifier">reset</span></a><span class="Other">(</span><span class="Identifier">filter</span><span class="Other">:</span> <a href="filter.html#Filter"><span class="Identifier">Filter</span></a><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Resets the filter to its starting state. This is 0 in the cutoff and resonance registers, no filters enabled, no voices being filtered, and zero volume.

</dd>
<a id="clock,Filter,int,int,int,int"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#clock%2CFilter%2Cint%2Cint%2Cint%2Cint"><span class="Identifier">clock</span></a><span class="Other">(</span><span class="Identifier">filter</span><span class="Other">:</span> <a href="filter.html#Filter"><span class="Identifier">Filter</span></a><span class="Other">;</span> <span class="Identifier">voice1</span><span class="Other">,</span> <span class="Identifier">voice2</span><span class="Other">,</span> <span class="Identifier">voice3</span><span class="Other">,</span> <span class="Identifier">external</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Runs on each clock cycle. Unlike most <tt class="docutils literal"><span class="pre">clock</span></tt> procs, this takes the current values for each of the voices and for the external input. It then calculates the output values for each of the filter channels and for the non-filtered output.

</dd>
<a id="output,Filter"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#output%2CFilter"><span class="Identifier">output</span></a><span class="Other">(</span><span class="Identifier">filter</span><span class="Other">:</span> <a href="filter.html#Filter"><span class="Identifier">Filter</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Returns the current output value of the filter mixer. This simply adds each filter channel together along with the DC offset, then multiplies that by the volume.

</dd>
<a id="new_filter"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#new_filter"><span class="Identifier">new_filter</span></a><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="filter.html#Filter"><span class="Identifier">Filter</span></a> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>



</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2021-08-06 09:41:17 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
